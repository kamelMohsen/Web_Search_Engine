"use strict";(function(){function a(a){var b=0,c=null,f=0,g=null,h=null,i="remove",j=0,k=0,l=null,m=null,n=0,o=0,p=null,q=0,r={600:2,900:4,1008:4,1280:5},s=[0,0,0,0,0,0],t="nw-c-nav__"+a+"-overflow-list-column__bordered",u="nw-c-nav__"+a+"-morebutton",v=".nw-c-nav__"+a+"-morebutton-container",w=document.querySelectorAll(".nw-c-nav__"+a+"-sections"),x=w[0];if(x){for(d("remove",v,"gs-u-display-none"),d("add",v,"gs-u-float-left"),p=x.childNodes,o=0;o<p.length;o+=1)if(0<=p[o].className.indexOf(u)){h=x.removeChild(p[o]);break}if(l=document.querySelectorAll(".nw-c-nav__"+a+"-overflow-list"),m=l[0],"childNodes"in m)for(k=0;k<m.childNodes.length;k+=1)for(c=m.childNodes[k];0<c.childNodes.length;)g=c.removeChild(c.childNodes[0]),d("swap",g,"gs-u-display-block","gs-u-float-left"),x.appendChild(g);for(;0<m.childNodes.length;)m.removeChild(m.childNodes[0]);if(p[p.length-1].offsetTop===p[0].offsetTop)return x.insertBefore(h,x.childNodes[x.childNodes.length-1]),d("remove",v,"gs-u-float-left"),d("add",v,"gs-u-display-none"),void e(a);for(x.insertBefore(h,x.childNodes[0]),p=x.childNodes,o=0;o<p.length-1;o+=1){if(p[o].offsetTop!==p[0].offsetTop){h=x.removeChild(p[o]),x.insertBefore(h,p[o-1]);break}o+1<p.length-1&&(h=x.removeChild(p[o]),x.insertBefore(h,p[o+1]))}for(q in f=0,r)window.innerWidth>=q&&(f=r[q]);for(j=p.length-o;0<j;j-=1)s[b]+=1,b=(b+1)%f;for(n=0,b=0,p=x.childNodes;p.length>o;)p.length-o<=s[b]&&(t=""),0===n&&(c=document.createElement("ul"),c.setAttribute("class","gs-o-list-ui gs-o-list-ui--top-no-border gel-pica gs-u-float-left nw-c-nav__"+a+"-overflow-list-column gs-u-display-block gel-layout__item gel-1/1 gel-1/2@m gel-1/4@l gel-1/5@xxl "+t),m.appendChild(c),n=s[b],b+=1),g=x.removeChild(p[o]),d("replace",g,"gs-u-float-left","gs-u-display-block"),c.appendChild(g),n-=1,0<=g.className.indexOf("nw-c-nav__selected")&&(i="add");for(;b<f;)c=document.createElement("ul"),c.setAttribute("class","gs-o-list-ui gs-o-list-ui--top-no-border gel-pica gs-u-float-left nw-c-nav__"+a+"-overflow-list-column gs-u-display-block gel-layout__item gel-1/1 gel-1/2@m gel-1/4@l gel-1/5@xxl "+t),m.appendChild(c),b+=1;d(i,"."+u,"nw-c-nav__"+a+"-morebutton__selected")}}function b(a,b,c,d){var e=!!(3<arguments.length)&&d;"function"==typeof window.addEventListener?a.addEventListener(b,c,e):a.attachEvent(b,c)}function c(){var a=document.createElement("button"),b=document.getElementById("nw-c-core-navigation-link");for(a.className=b.className+" gs-u-mr",a.setAttribute("aria-expanded",b.getAttribute("aria-expanded")),a.setAttribute("aria-haspopup",b.getAttribute("aria-haspopup"));0<b.childNodes.length;)a.appendChild(b.removeChild(b.childNodes[0]));b.parentElement.replaceChild(a,b)}function d(a,b,c,e){for(var f=[],g=0,h=null,i=0,j="string"==typeof b?document.querySelectorAll(b):[b];i<j.length;i+=1)switch(h=j[i],a){case"add":d("has",h,c)||(h.className=h.className+" "+c);break;case"has":return 0<=o(h.className.split(" "),c);case"remove":f=h.className.split(" "),g=o(f,c),-1!==g&&f.splice(g,1),h.className=f.join(" ");break;case"replace":d("remove",h,c),d("add",h,e);break;case"swap":d("has",h,c)?(d("remove",h,c),d("add",h,e)):(d("remove",h,e),d("add",h,c));break;case"toggle":c.split(" ").map(function(a){d("has",h,a)?d("remove",h,a):d("add",h,a)});}return!1}function e(a){A[a]&&(d("add",".nw-c-nav__"+a+"-overflow","gs-u-display-none"),d("remove",".nw-c-nav__"+a+"-morebutton","nw-c-nav__"+a+"-morebutton__open"),d("add",".nw-c-nav__"+a+"-morebutton","nw-c-nav__"+a+"-morebutton__closed"),p(".nw-c-nav__"+a+"-morebutton",!1),A[a]=!1)}function f(){d("remove",".nw-c-nav__narrow-footerbutton","nw-c-nav__item-open"),d("add",".nw-c-nav__narrow-footerbutton","nw-c-nav__item-closed"),d("remove",".nw-c-nav__narrow-bottom","gs-u-display-block"),d("remove",".nw-c-nav__narrow-bottom","gs-u-display-none@m"),p(".nw-c-nav__narrow-footerbutton",!1)}function g(){d("remove",".nw-c-nav__narrow-secondary__panel","gs-u-display-none"),d("replace",".nw-c-nav__narrow-secondary__panel","nw-c-nav__narrow-secondary__panel-open","nw-c-nav__narrow-secondary__panel-closed"),d("replace",".nw-c-nav__narrow-secondary__button","nw-c-nav__item-open","nw-c-nav__item-closed"),p(".nw-c-nav__narrow-secondary__button",!1)}function h(){d("remove",".nw-c-nav__narrow-top","gs-u-display-block"),d("add",".nw-c-nav__narrow-top","gs-u-display-none@m"),d("remove",".nw-c-nav__narrow-headerbutton","nw-c-nav__narrow-headerbutton--open"),d("add",".nw-c-nav__narrow-headerbutton","nw-c-nav__narrow-headerbutton--closed"),p(".nw-c-nav__narrow-headerbutton",!1),d("remove","#site-container","gs-u-display-none"),d("remove","#nw-c-nav__narrow-section__heading","gs-u-display-none"),d("remove",".nw-c-nav__narrow-secondary__panel","gs-u-display-none")}function i(a,b,c){var d;return function(){var e=this,f=arguments,g=c&&!d;clearTimeout(d),d=setTimeout(function later(){d=null,c||a.apply(e,f)},b),g&&a.apply(e,f)}}function j(a,b){for(var c=document.querySelectorAll(b),d=0,e=0,f=null;d<c.length;d+=1)for(f=c[d].childNodes,e=0;e<f.length;e+=1)if(f[e]===a.target)return c[d];return null}function k(a){return a.preventDefault(),a.stopPropagation(),!1}function l(){b(document,"focus",function(){var a=null,b=null;["wide","secondary"].forEach(function(c){A[c]&&(a=document.querySelectorAll(".nw-c-nav__"+c+"-sections")[0],b=document.querySelectorAll(".nw-c-nav__"+c+"-overflow-list")[0],!n(a,document.activeElement)&&!n(b,document.activeElement)&&e(c))})},!0)}function m(){return 600>window.innerWidth?(e("wide"),void e("secondary")):void(d("has",".nw-c-nav__narrow-headerbutton","nw-c-nav__narrow-headerbutton--open")&&h(),d("has","#local-search-region","gs-u-display-none")&&d("has","#site-container","gs-u-display-none")&&h(),d("has",".nw-c-nav__narrow-footerbutton","nw-c-nav__item-open")&&f(),d("has",".nw-c-nav__narrow-footerbutton","nw-c-nav__item-open")&&f(),d("has",".nw-c-nav__narrow-secondary__panel","nw-c-nav__narrow-secondary__panel-open")&&g(),a("wide"),a("secondary"))}function n(a,b){var c=0;if("childNodes"in a)for(;c<a.childNodes.length;c+=1)if(b===a.childNodes[c]||n(a.childNodes[c],b))return!0;return!1}function o(a,b){for(var c=0;c<a.length;c+=1)if(a[c]===b)return c;return-1}function p(a,b){for(var c=window.document.querySelectorAll(a),e=0;e<c.length;e+=1)"string"==typeof b?c[e].querySelectorAll("[aria-expanded]")[0].setAttribute("aria-expanded",d("has",c[e],b)):c[e].setAttribute("aria-expanded",b)}function q(a){for(var b=window.document.querySelectorAll(a),c=0;c<b.length;c+=1)b[c].setAttribute("aria-expanded","true"===b[c].getAttribute("aria-expanded")?"false":"true")}function r(){e("wide"),e("secondary"),h(),f(),g()}function s(a){for(var b=a||document,c=b.querySelectorAll("[data-entityid]"),d="",e=0,f=0,g="",h=[];e<c.length;e+=1){for(d=c[e].getAttribute("data-entityid"),h=c[e].querySelectorAll("a,button"),f=0;f<h.length;f+=1)g=h[f],"undefined"==typeof g.linktrack?g.linktrack="":g.linktrack+="&",g.linktrack+="story_slot=%d".replace("%d",f+1);v({region:c[e],linkLocation:d})}}function t(){function a(a){var b=x(a.target,"UL"),c=d("has",b,"nw-c-nav__wide-sections")||d("has",b,"nw-c-nav__wide-overflow-list-column"),e=d("has",b,"nw-c-nav__wide-overflow-list-column")||d("has",b,"nw-c-nav__secondary-overflow-list-column"),f=y(a.target),g=c?"wide":"wide-secondary",h=e?"in":"out",i=c?"primary":"secondary",j=e?"-overflow":"",k="wide-navigation-"+i+j;w({action_type:"click",action_name:"nav-"+g+"-"+h+"sidePanel-click"},{link:f,linkLocation:k}),v({linkLocation:k})}function c(a,b){var c=y(b.target);w({action_type:"click",action_name:"nav-narrow-insidePanel-click"},{link:c}),v({linkLocation:"narrow-navigation-"+a})}var e=0,f=[],g=0,h=[],i=[],j=[];for(s(),h=document.querySelectorAll(".nw-c-nav__wide-menuitem-container,.nw-c-nav__secondary-menuitem-container");g<h.length;g+=1)for(f=h[g].querySelectorAll("a"),e=0;e<f.length;e+=1)b(f[e],"click",a);for(i=document.querySelectorAll("nav.nw-c-nav__narrow-top .nw-c-nav__item"),g=0;g<i.length;g+=1)for(f=i[g].querySelectorAll("a"),e=0;e<f.length;e+=1)b(f[e],"click",c.bind(null,"primary"));for(j=document.querySelectorAll("nav.nw-c-nav__narrow-bottom .nw-c-nav__item"),g=0;g<j.length;g+=1)for(f=j[g].querySelectorAll("a"),e=0;e<f.length;e+=1)b(f[e],"click",c.bind(null,"footer"))}function u(a,b,c){var d=a.getAttribute("href"),e=window.NewsPage.container||null,f=document.getElementById("nw-c-navigation-enhanced-javascript"),g=window.NewsPage.edition||f.getAttribute("data-nav-edition")||"domestic";return e?window.bbcpage.getContentId().then(function(a){return document.dispatchEvent(new CustomEvent("bbc-user-event",{detail:{container:e,result:d,source:a,label:"click~story",metadata:{EDN:g,PAR:b,CHD:c}}}))}):null}function v(a){var c=a.region.querySelectorAll("a")[0],d=a.linkLocation.split("#"),e=null,f=null;1<d.length&&(e="".concat(d[0],"::1"),f="".concat(d[0],"::").concat(d[1])),b(a.region,"click",function(){return u(c,e,f)})}function w(a,b){var c=a.action_type||"event",d=a.action_name,e=0,f=a.selector,g=f?document.querySelectorAll(f):[];if(f)for(;e<g.length;e+=1)b.link=y(g[e]);else;}function x(a,b){for(;a&&!(a.nodeName===b);)a=a.parentNode;return a}function y(a){var b=0,c=null;if("SPAN"===a.nodeName)return a.innerHTML.trim();for(c=a.querySelectorAll("span");b<c.length;b+=1)if(""!==c[b].innerHTML)return c[b].innerHTML.trim();return""}function z(a){return"true"===a.getAttribute("aria-expanded")?"visible":"hidden"}var A={wide:!1,secondary:!1},B={toggleWideMoreButton:{actuator:".nw-c-nav__wide-morebutton",handler:function handler(a){var b={action_type:"toggle",action_name:"nav-wide-primary-overflow-visibility",selector:".nw-c-nav__wide-morebutton"};return e("secondary"),d("has",".nw-c-nav__wide-morebutton","nw-c-nav__wide-morebutton__closed")?(d("remove",".nw-c-nav__wide-overflow","gs-u-display-none"),d("swap",".nw-c-nav__wide-morebutton","nw-c-nav__wide-morebutton__closed","nw-c-nav__wide-morebutton__open"),p(".nw-c-nav__wide-morebutton",!0),w(b,{visibility:"visible"}),A.wide=!0):(e("wide"),w(b,{visibility:"hidden"})),k(a)}},toggleWideSecondaryMoreButton:{actuator:".nw-c-nav__secondary-morebutton",handler:function handler(a){var b={action_type:"toggle",action_name:"nav-wide-secondary-overflow-visibility",selector:".nw-c-nav__secondary-morebutton"};return e("wide"),d("has",".nw-c-nav__secondary-morebutton","nw-c-nav__secondary-morebutton__closed")?(d("remove",".nw-c-nav__secondary-overflow","gs-u-display-none"),d("swap",".nw-c-nav__secondary-morebutton","nw-c-nav__secondary-morebutton__closed","nw-c-nav__secondary-morebutton__open"),p(".nw-c-nav__secondary-morebutton",!0),w(b,{visibility:"visible"}),A.secondary=!0):(e("secondary"),w(b,{visibility:"hidden"})),k(a)}},narrowPrimaryNav:{actuator:".nw-c-nav__narrow-headerbutton",handler:function handler(a){var b={action_type:"toggle",action_name:"nav-narrow-primary-visibility",selector:".nw-c-nav__narrow-headerbutton"};return d("has",".nw-c-nav__narrow-headerbutton","nw-c-nav__narrow-headerbutton--closed")?(f(),g(),d("add","#site-container","gs-u-display-none"),d("add","#local-search-region","gs-u-display-none"),d("add","#nw-c-nav__narrow-section__heading","gs-u-display-none"),d("add",".nw-c-nav__narrow-secondary__panel","gs-u-display-none"),d("swap",".nw-c-nav__narrow-headerbutton","nw-c-nav__narrow-headerbutton--open","nw-c-nav__narrow-headerbutton--closed"),q(".nw-c-nav__narrow-headerbutton"),d("remove",".nw-c-nav__narrow-top","gs-u-display-none@m"),d("add",".nw-c-nav__narrow-top","gs-u-display-block"),w(b,{visibility:"visible"})):(h(),d("remove",".nw-c-nav__narrow-secondary__panel","gs-u-display-none"),w(b,{visibility:"hidden"})),k(a)}},narrowSecondaryNav:{actuator:".nw-c-nav__narrow-secondary__button",handler:function handler(a){var b={action_type:"toggle",action_name:"nav-narrow-secondary-visibility",selector:".nw-c-nav__narrow-secondary__button"};return d("has",".nw-c-nav__narrow-secondary__button","nw-c-nav__item-closed")?(d("swap",".nw-c-nav__narrow-secondary__panel","nw-c-nav__narrow-secondary__panel-closed","nw-c-nav__narrow-secondary__panel-open"),d("swap",".nw-c-nav__narrow-secondary__button","nw-c-nav__item-open","nw-c-nav__item-closed"),q(".nw-c-nav__narrow-secondary__button"),w(b,{visibility:"visible"})):(d("swap",".nw-c-nav__narrow-secondary__panel","nw-c-nav__narrow-secondary__panel-closed","nw-c-nav__narrow-secondary__panel-open"),d("swap",".nw-c-nav__narrow-secondary__button","nw-c-nav__item-open","nw-c-nav__item-closed"),p(".nw-c-nav__narrow-headerbutton",!1),w(b,{visibility:"hidden"})),k(a)}},topNavTwisty:{actuator:".nw-c-nav__narrow-top .nw-c-nav__twistable",handler:function handler(a){var b=window.document.querySelectorAll(".nw-c-nav__narrow-top .nw-c-nav__twistable.nw-c-nav__item-open"),c=j(a,".nw-c-nav__narrow-top .nw-c-nav__twistable");return 0<b.length&&b[0]!==c&&d("swap",b[0],"nw-c-nav__item-open","nw-c-nav__item-closed"),d("swap",c,"nw-c-nav__item-closed","nw-c-nav__item-open"),p(".nw-c-nav__narrow-top .nw-c-nav__twistable","nw-c-nav__item-open"),w({on:"stats:nav:narrow:top:primary:accordion:visibility",action_type:"toggle",action_name:"nav-narrow-top-primary-accordion-visibility"},{visibility:z(c),link:y(c)}),k(a)}},bottomNavButton:{actuator:".nw-c-nav__narrow-footerbutton",handler:function handler(a){var b=z(document.querySelectorAll(".nw-c-nav__narrow-footerbutton")[0]);return d("swap",".nw-c-nav__narrow-footerbutton","nw-c-nav__item-open","nw-c-nav__item-closed"),d("toggle",".nw-c-nav__narrow-bottom","gs-u-display-block gs-u-display-none@m"),q(".nw-c-nav__narrow-footerbutton"),w({action_type:"toggle",action_name:"nav-narrow-footer-visibility",selector:".nw-c-nav__narrow-footerbutton"},{visibility:b}),k(a)}},bottomNavTwisty:{actuator:".nw-c-nav__narrow-bottom .nw-c-nav__twistable",handler:function handler(a){var b=window.document.querySelectorAll(".nw-c-nav__narrow-bottom .nw-c-nav__twistable.nw-c-nav__item-open"),c=j(a,".nw-c-nav__narrow-bottom .nw-c-nav__twistable");return 0<b.length&&b[0]!==c&&d("swap",b[0],"nw-c-nav__item-open","nw-c-nav__item-closed"),d("swap",c,"nw-c-nav__item-closed","nw-c-nav__item-open"),p(".nw-c-nav__narrow-bottom .nw-c-nav__twistable","nw-c-nav__item-open"),k(a)}},cancelDialogs:{actuator:document,event:"keydown",handler:function handler(a){var b=a||window.event;b.keyCode===27&&r()}}};(function(){var d=0,e=[],f=null,g=null;for(g in c(),t(),B)for(f=B[g],e="string"==typeof f.actuator?document.querySelectorAll(f.actuator):[f.actuator],d=0;d<e.length;d+=1)b(e[d],f.event?f.event:"click",f.handler);l(),a("wide"),a("secondary"),b(window,"resize",i(m,300))})(),window.trackDataEntityIds=s})();
//# sourceMappingURL=navigation.js.map
