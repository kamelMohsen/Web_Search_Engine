<!DOCTYPE HTML PUBLIC "-//W3C//DTD HTML 4.01 Transitional//EN" "http://www.w3.org/TR/html4/loose.dtd">
<!-- NewPage -->
<html lang="en">
<head>
<!-- Generated by javadoc (1.8.0_66-ea) on Mon Jun 13 09:43:25 CEST 2016 -->
<meta http-equiv="Content-Type" content="text/html; charset=utf-8">
<title>org.apache.lucene.replicator (Lucene 6.1.0 API)</title>
<meta name="date" content="2016-06-13">
<link rel="stylesheet" type="text/css" href="../../../../stylesheet.css" title="Style">
<script type="text/javascript" src="../../../../script.js"></script>
</head>
<body>
<script type="text/javascript"><!--
    try {
        if (location.href.indexOf('is-external=true') == -1) {
            parent.document.title="org.apache.lucene.replicator (Lucene 6.1.0 API)";
        }
    }
    catch(err) {
    }
//-->
</script>
<noscript>
<div>JavaScript is disabled on your browser.</div>
</noscript>
<!-- ========= START OF TOP NAVBAR ======= -->
<div class="topNav"><a name="navbar.top">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.top" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.top.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Package</li>
<li><a href="../../../../org/apache/lucene/replicator/http/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/lucene/replicator/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_top">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_top");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.top">
<!--   -->
</a></div>
<!-- ========= END OF TOP NAVBAR ========= -->
<div class="header">
<h1 title="Package" class="title">Package&nbsp;org.apache.lucene.replicator</h1>
<div class="docSummary">
<div class="block">Files replication framework</div>
</div>
<p>See:&nbsp;<a href="#package.description">Description</a></p>
</div>
<div class="contentContainer">
<ul class="blockList">
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Interface Summary table, listing interfaces, and an explanation">
<caption><span>Interface Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Interface</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/lucene/replicator/ReplicationClient.ReplicationHandler.html" title="interface in org.apache.lucene.replicator">ReplicationClient.ReplicationHandler</a></td>
<td class="colLast">
<div class="block">Handler for revisions obtained by the client.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/lucene/replicator/ReplicationClient.SourceDirectoryFactory.html" title="interface in org.apache.lucene.replicator">ReplicationClient.SourceDirectoryFactory</a></td>
<td class="colLast">
<div class="block">Resolves a session and source into a <a href="../../../../../core/org/apache/lucene/store/Directory.html?is-external=true" title="class or interface in org.apache.lucene.store"><code>Directory</code></a> to use for copying
 the session files to.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/lucene/replicator/Replicator.html" title="interface in org.apache.lucene.replicator">Replicator</a></td>
<td class="colLast">
<div class="block">An interface for replicating files.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/lucene/replicator/Revision.html" title="interface in org.apache.lucene.replicator">Revision</a></td>
<td class="colLast">
<div class="block">A revision comprises lists of files that come from different sources and need
 to be replicated together to e.g.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Class Summary table, listing classes, and an explanation">
<caption><span>Class Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Class</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/lucene/replicator/IndexAndTaxonomyReplicationHandler.html" title="class in org.apache.lucene.replicator">IndexAndTaxonomyReplicationHandler</a></td>
<td class="colLast">
<div class="block">A <a href="../../../../org/apache/lucene/replicator/ReplicationClient.ReplicationHandler.html" title="interface in org.apache.lucene.replicator"><code>ReplicationClient.ReplicationHandler</code></a> for replication of an index and taxonomy pair.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/lucene/replicator/IndexAndTaxonomyRevision.html" title="class in org.apache.lucene.replicator">IndexAndTaxonomyRevision</a></td>
<td class="colLast">
<div class="block">A <a href="../../../../org/apache/lucene/replicator/Revision.html" title="interface in org.apache.lucene.replicator"><code>Revision</code></a> of a single index and taxonomy index files which comprises
 the list of files from both indexes.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/lucene/replicator/IndexAndTaxonomyRevision.SnapshotDirectoryTaxonomyWriter.html" title="class in org.apache.lucene.replicator">IndexAndTaxonomyRevision.SnapshotDirectoryTaxonomyWriter</a></td>
<td class="colLast">
<div class="block">A <a href="../../../../../facet/org/apache/lucene/facet/taxonomy/directory/DirectoryTaxonomyWriter.html?is-external=true" title="class or interface in org.apache.lucene.facet.taxonomy.directory"><code>DirectoryTaxonomyWriter</code></a> which sets the underlying
 <a href="../../../../../core/org/apache/lucene/index/IndexWriter.html?is-external=true" title="class or interface in org.apache.lucene.index"><code>IndexWriter</code></a>'s <a href="../../../../../core/org/apache/lucene/index/IndexDeletionPolicy.html?is-external=true" title="class or interface in org.apache.lucene.index"><code>IndexDeletionPolicy</code></a> to
 <a href="../../../../../core/org/apache/lucene/index/SnapshotDeletionPolicy.html?is-external=true" title="class or interface in org.apache.lucene.index"><code>SnapshotDeletionPolicy</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/lucene/replicator/IndexInputInputStream.html" title="class in org.apache.lucene.replicator">IndexInputInputStream</a></td>
<td class="colLast">
<div class="block">An <a href="https://docs.oracle.com/javase/8/docs/api/java/io/InputStream.html?is-external=true" title="class or interface in java.io"><code>InputStream</code></a> which wraps an <a href="../../../../../core/org/apache/lucene/store/IndexInput.html?is-external=true" title="class or interface in org.apache.lucene.store"><code>IndexInput</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/lucene/replicator/IndexReplicationHandler.html" title="class in org.apache.lucene.replicator">IndexReplicationHandler</a></td>
<td class="colLast">
<div class="block">A <a href="../../../../org/apache/lucene/replicator/ReplicationClient.ReplicationHandler.html" title="interface in org.apache.lucene.replicator"><code>ReplicationClient.ReplicationHandler</code></a> for replication of an index.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/lucene/replicator/IndexRevision.html" title="class in org.apache.lucene.replicator">IndexRevision</a></td>
<td class="colLast">
<div class="block">A <a href="../../../../org/apache/lucene/replicator/Revision.html" title="interface in org.apache.lucene.replicator"><code>Revision</code></a> of a single index files which comprises the list of files
 that are part of the current <a href="../../../../../core/org/apache/lucene/index/IndexCommit.html?is-external=true" title="class or interface in org.apache.lucene.index"><code>IndexCommit</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/lucene/replicator/LocalReplicator.html" title="class in org.apache.lucene.replicator">LocalReplicator</a></td>
<td class="colLast">
<div class="block">A <a href="../../../../org/apache/lucene/replicator/Replicator.html" title="interface in org.apache.lucene.replicator"><code>Replicator</code></a> implementation for use by the side that publishes
 <a href="../../../../org/apache/lucene/replicator/Revision.html" title="interface in org.apache.lucene.replicator"><code>Revision</code></a>s, as well for clients to <a href="../../../../org/apache/lucene/replicator/LocalReplicator.html#checkForUpdate-java.lang.String-"><code>check for updates</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/lucene/replicator/PerSessionDirectoryFactory.html" title="class in org.apache.lucene.replicator">PerSessionDirectoryFactory</a></td>
<td class="colLast">
<div class="block">A <a href="../../../../org/apache/lucene/replicator/ReplicationClient.SourceDirectoryFactory.html" title="interface in org.apache.lucene.replicator"><code>ReplicationClient.SourceDirectoryFactory</code></a> which returns <a href="../../../../../core/org/apache/lucene/store/FSDirectory.html?is-external=true" title="class or interface in org.apache.lucene.store"><code>FSDirectory</code></a> under a
 dedicated session directory.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/lucene/replicator/ReplicationClient.html" title="class in org.apache.lucene.replicator">ReplicationClient</a></td>
<td class="colLast">
<div class="block">A client which monitors and obtains new revisions from a <a href="../../../../org/apache/lucene/replicator/Replicator.html" title="interface in org.apache.lucene.replicator"><code>Replicator</code></a>.</div>
</td>
</tr>
<tr class="rowColor">
<td class="colFirst"><a href="../../../../org/apache/lucene/replicator/RevisionFile.html" title="class in org.apache.lucene.replicator">RevisionFile</a></td>
<td class="colLast">
<div class="block">Describes a file in a <a href="../../../../org/apache/lucene/replicator/Revision.html" title="interface in org.apache.lucene.replicator"><code>Revision</code></a>.</div>
</td>
</tr>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/lucene/replicator/SessionToken.html" title="class in org.apache.lucene.replicator">SessionToken</a></td>
<td class="colLast">
<div class="block">Token for a replication session, for guaranteeing that source replicated
 files will be kept safe until the replication completes.</div>
</td>
</tr>
</tbody>
</table>
</li>
<li class="blockList">
<table class="typeSummary" border="0" cellpadding="3" cellspacing="0" summary="Exception Summary table, listing exceptions, and an explanation">
<caption><span>Exception Summary</span><span class="tabEnd">&nbsp;</span></caption>
<tr>
<th class="colFirst" scope="col">Exception</th>
<th class="colLast" scope="col">Description</th>
</tr>
<tbody>
<tr class="altColor">
<td class="colFirst"><a href="../../../../org/apache/lucene/replicator/SessionExpiredException.html" title="class in org.apache.lucene.replicator">SessionExpiredException</a></td>
<td class="colLast">
<div class="block">Exception indicating that a revision update session was expired due to lack
 of activity.</div>
</td>
</tr>
</tbody>
</table>
</li>
</ul>
<a name="package.description">
<!--   -->
</a>
<h2 title="Package org.apache.lucene.replicator Description">Package org.apache.lucene.replicator Description</h2>
<div class="block"><h1>Files replication framework</h1>

 The
 <a href="Replicator.html">Replicator</a> allows replicating files between a server and client(s). Producers publish
 <a href="Revision.html">revisions</a> and consumers update to the latest revision available.
 <a href="ReplicationClient.html">ReplicationClient</a> is a helper utility for performing the update operation. It can
 be invoked either
 <a href="ReplicationClient.html#updateNow()">manually</a> or periodically by
 <a href="ReplicationClient.html#startUpdateThread(long,+java.lang.String)">starting an update thread</a>.
 <a href="http/HttpReplicator.html">HttpReplicator</a> can be used to replicate revisions by consumers that reside on
 a different node than the producer.

 <p>
 The replication framework supports replicating any type of files, with built-in support for a single search index as
 well as an index and taxonomy pair. For a single index, the application should publish an
 <a href="IndexRevision.html">IndexRevision</a> and set
 <a href="IndexReplicationHandler.html">IndexReplicationHandler</a> on the client. For an index and taxonomy pair, the
 application should publish an <a href="IndexAndTaxonomyRevision.html">IndexAndTaxonomyRevision</a> and set 
 <a href="IndexAndTaxonomyReplicationHandler.html">IndexAndTaxonomyReplicationHandler</a> on the client.

 <p>
 When the replication client detects that there is a newer revision available, it copies the files of the revision and
 then invokes the handler to complete the operation (e.g. copy the files to the index directory, fsync them, reopen an
 index reader etc.). By default, only files that do not exist in the handler's
 <a href="ReplicationClient.ReplicationHandler.html#currentRevisionFiles()">current revision files</a> are copied,
 however this can be overridden by extending the client.

 <p>
 An example usage of the Replicator:
 
 <pre class="prettyprint lang-java">
 // ++++++++++++++ SERVER SIDE ++++++++++++++ // 
 IndexWriter publishWriter; // the writer used for indexing
 Replicator replicator = new LocalReplicator();
 replicator.publish(new IndexRevision(publishWriter));

 // ++++++++++++++ CLIENT SIDE ++++++++++++++ // 
 // either LocalReplictor, or HttpReplicator if client and server are on different nodes
 Replicator replicator;
 
 // callback invoked after handler finished handling the revision and e.g. can reopen the reader.
 Callable&lt;Boolean&gt; callback = null; // can also be null if no callback is needed
 ReplicationHandler handler = new IndexReplicationHandler(indexDir, callback);
 SourceDirectoryFactory factory = new PerSessionDirectoryFactory(workDir);
 ReplicationClient client = new ReplicationClient(replicator, handler, factory);

 // invoke client manually
 client.updateNow();
 
 // or, periodically
 client.startUpdateThread(100); // check for update every 100 milliseconds
 </pre></div>
</div>
<!-- ======= START OF BOTTOM NAVBAR ====== -->
<div class="bottomNav"><a name="navbar.bottom">
<!--   -->
</a>
<div class="skipNav"><a href="#skip.navbar.bottom" title="Skip navigation links">Skip navigation links</a></div>
<a name="navbar.bottom.firstrow">
<!--   -->
</a>
<ul class="navList" title="Navigation">
<li><a href="../../../../overview-summary.html">Overview</a></li>
<li class="navBarCell1Rev">Package</li>
<li>Class</li>
<li><a href="package-use.html">Use</a></li>
<li><a href="package-tree.html">Tree</a></li>
<li><a href="../../../../deprecated-list.html">Deprecated</a></li>
<li><a href="../../../../help-doc.html">Help</a></li>
</ul>
</div>
<div class="subNav">
<ul class="navList">
<li>Prev&nbsp;Package</li>
<li><a href="../../../../org/apache/lucene/replicator/http/package-summary.html">Next&nbsp;Package</a></li>
</ul>
<ul class="navList">
<li><a href="../../../../index.html?org/apache/lucene/replicator/package-summary.html" target="_top">Frames</a></li>
<li><a href="package-summary.html" target="_top">No&nbsp;Frames</a></li>
</ul>
<ul class="navList" id="allclasses_navbar_bottom">
<li><a href="../../../../allclasses-noframe.html">All&nbsp;Classes</a></li>
</ul>
<div>
<script type="text/javascript"><!--
  allClassesLink = document.getElementById("allclasses_navbar_bottom");
  if(window==top) {
    allClassesLink.style.display = "block";
  }
  else {
    allClassesLink.style.display = "none";
  }
  //-->
</script>
</div>
<a name="skip.navbar.bottom">
<!--   -->
</a></div>
<!-- ======== END OF BOTTOM NAVBAR ======= -->
<p class="legalCopy"><small>
          <i>Copyright &copy; 2000-2016 Apache Software Foundation.  All Rights Reserved.</i>
          <script src='../../../../prettify.js' type='text/javascript'></script>
          <script type='text/javascript'>
            (function(){
              var oldonload = window.onload;
              if (typeof oldonload != 'function') {
                window.onload = prettyPrint;
              } else {
                window.onload = function() {
                  oldonload();
                  prettyPrint();
                }
              }
            })();
          </script>
        </small></p>
</body>
</html>
